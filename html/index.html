<!DOCTYPE html>
<html lang="en">
<head>
    <title>KKI Hub</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="https://cdn.jwplayer.com/libraries/5jBuqoni.js"></script>
</head>
<body>
<!-- Page content -->
<div class="w3-content w3-padding-large w3-margin-top" id="portfolio">
    <div>
        <ol>
            <li><a href="#" onclick="jwplayer().seek(20);">First chapter</a></li>
            <li><a href="#" onclick="jwplayer().seek(40);">Second chapter</a></li>
            <li><a href="#" onclick="jwplayer().seek(120);">Third chapter</a></li>
            <li><a href="#" onclick="jwplayer().seek(150);">The last chapter</a></li>
        </ol>
    </div>

    <div id="myElement"></div>
</div>

<!--<div itemScope itemType="https://schema.org/VideoObject">-->
<!--    <meta itemProp="uploadDate" content="Fri Mar 26 2021 14:51:11 GMT+0200 (Eastern European Standard Time)"/>-->
<!--    <meta itemProp="name" content="Moventig Website Version%20v1"/>-->
<!--    <script src="https://cdn.jwplayer.com/players/SHoKvEkM-5jBuqoni.js"></script>-->
<!--</div>-->

<!--<div itemscope itemtype="https://schema.org/VideoObject">-->
<!--    <meta itemprop="uploadDate" content="Thu Feb 18 2021 18:33:59 GMT+0200 (Eastern European Standard Time)"/>-->
<!--    <meta itemprop="name" content="Kki018-administration-animation-final-23oct20"/>-->
<!--    <meta itemprop="duration" content="PT9M39.098S" />-->
<!--    <meta itemprop="thumbnailUrl" content="https://content.jwplatform.com/thumbs/rw9yl7gT-1920.jpg"/>-->
<!--    <meta itemprop="contentUrl" content="https://content.jwplatform.com/videos/rw9yl7gT-KjfcIRwS.mp4"/>-->
<!--    <script src="https://cdn.jwplayer.com/players/rw9yl7gT-5jBuqoni.js"></script>-->
<!--</div>-->

<script src="assets/js/jwplayer.js"></script>

<section>
    <div>
        <u>
            Source of the Page is:
        </u>
        <h2 id="page_source"></h2>
    </div>
    <div>
        <u>
            Source of the Video is:
        </u>
        <h2 id="video_source"></h2>
    </div>
</section>

<section>

    <video width="932" height="524" poster="assets/start.png" controls="true" id="vplayer">
        <track src="assets/chapters_new.vtt" kind="chapters" default>
        A browser with <a href="http://www.jwplayer.com/html5/">HTML5 text track support</a> is required.
    </video>

    <div id="bar"></div>

</section>

<script type="text/javascript">
    var v = document.querySelector("video");
    var t = document.querySelector("track");
    var b = document.querySelector("#bar");

    // v.addEventListener('click',play,false);
    v.addEventListener('timeupdate',update,false);
    t.addEventListener('loaded',render,false); // Bug in FF31 MAC: wrong event name
    t.addEventListener('load',render,false);

    function play() {
        if(v.paused) { v.play(); } else { v.pause(); }
    }

    function update() {
        var p = v.currentTime/v.duration*100;
        // b.style.background = "linear-gradient(to right, #500 "+p+"%, #000 "+p+"%)";
    }

    function render() {
        var c = v.textTracks[0].cues;
        for (var i=0; i<c.length; i++) {
            var s = document.createElement("span");
            s.innerHTML = c[i].text;
            s.setAttribute('data-start',c[i].startTime);
            // s.style.width = ((c[i].endTime-c[i].startTime)/888*3932-7)+'px';
            s.addEventListener("click",seek);
            b.appendChild(s);
        }
    }

    function seek(e) {
        v.currentTime = this.getAttribute('data-start');
        if(v.paused) { v.play(); }
    }

</script>



<script>
    var api = 'https://content-eu-1.content-cms.com/api/2b02a3e0-0b88-47df-ad46-4d72278932bc';
    let source_url = 'https://content-eu-1.content-cms.com/api/2b02a3e0-0b88-47df-ad46-4d72278932bc/delivery/v1/rendering/context/fc299e68-c195-4225-8200-55011a10af20';

    document.getElementById("page_source").innerText = source_url;
    fetch(source_url)
        .then(res => res.json())
        .then((out) => {
            var response = out.elements.headerVideo;
            // console.log('Checkout this JSON! ', response);

            var resp_video_source = api + response.asset.resourceUri;
            document.getElementById("video_source").innerText = resp_video_source;

            var video = document.getElementById('vplayer');
            var video_source = document.createElement('source');
            video_source.setAttribute('src', resp_video_source);
            video.appendChild(video_source);
        })
    .catch(err => { throw err });
</script>


</body>
</html>